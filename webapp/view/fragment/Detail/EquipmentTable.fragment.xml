<core:FragmentDefinition 
	xmlns="sap.m" 
	xmlns:core="sap.ui.core" 
	xmlns:t="sap.ui.table"
	xmlns:u="sap.ui.unified">
	<t:Table 
		id="EquipmentTable" 
		rows="{mEquipment>/list}"
		rowSelectionChange="onSelectionChangeEquipmentTable"
		selectionMode="MultiToggle" 
		threshold="10"
		visibleRowCountMode="Auto">
		<t:extension>
			<Toolbar class="sapMTBHeader-CTX">
				<Title 
					text="{i18n>EquipmentTableTitle} ({mEquipment>/count})" 
					level="H2"
					class="sapUiSmallMarginEnd"/>
				<Button 
					icon="sap-icon://action-settings"
					press="onEquipmentTablePersonalizationPress"
					tooltip="{i18n>EquipmentTableButtonTooltipToolbarPersonalise}"
					type="Transparent"/>
				<ToolbarSpacer/>
				<m:Button
					press="onOpenExportXLS" 
					icon="sap-icon://excel-attachment" 
					tooltip="{i18n>EquipmentTableButtonTooltipExportExcel}"
					type="Transparent"/>
				<Button 
					enabled="{= ${mDetailPage>/bEquipmentSelected}}"
					icon="sap-icon://accept"
					press="onApplyEquipmentMassStatus"
					text="{i18n>EquipmentMassButtonTooltipValidate}"
					tooltip="{i18n>EquipmentMassButtonTooltipValidate}"
					type="Accept"/>
				<Button 
					enabled="{= ${mDetailPage>/bEquipmentSelected}}"
					icon="sap-icon://decline"
					press="onApplyEquipmentMassStatus"
					text="{i18n>EquipmentMassButtonTooltipReject}"
					tooltip="{i18n>EquipmentMassButtonTooltipReject}"
					type="Reject"/>
				<Button 
					enabled="{= ${mDetailPage>/bEquipmentSelected}}"
					icon="sap-icon://cause"
					press="onApplyEquipmentMassStatus"
					text="{i18n>EquipmentMassButtonTooltipReturnTakeover}"
					tooltip="{i18n>EquipmentMassButtonTooltipReturnTakeover}"
					type="Emphasized"/>
			</Toolbar>
		</t:extension>			
		<t:columns>
			<t:Column 
				id="EquipmentIdCol"
				hAlign="Center" 
				width="10%" 
				filterProperty="EquipmentId" 
				sortProperty="EquipmentId">
				<Label text="{i18n>EquipmentTblColHdrEquipmentId}"/>
				<t:template>
					<Text text="{mEquipment>EquipmentId}"/>
				</t:template>
			</t:Column>			
			<t:Column 
				id="EquipmentNameCol"
				hAlign="Left" 
				width="20%" 
				filterProperty="EquipmentName" 
				sortProperty="EquipmentName">
				<Label text="{i18n>EquipmentTblColHdrEquipmentName}"/>
				<t:template>
					<Text text="{mEquipment>EquipmentName}"/>
				</t:template>
			</t:Column>
			<t:Column 
				id="CompleteLocationNameCol"
				hAlign="Left" 
				width="35%" 
				sortProperty="CompleteLocationName">
				<Label text="{i18n>EquipmentTblColHdrLocationName}"/>
				<t:template>
					<Text text="{mEquipment>CompleteLocationName}"/>
				</t:template>
			</t:Column>
			<t:Column 
				id="PhotoIdCol"
				hAlign="Center" 
				width="5%">
				<Label text="{i18n>EquipmentTblColHdrPhotoId}"/>
				<t:template>
					<core:Icon 
						src="{= ${mEquipment>PhotoId} === '' ? none : 'sap-icon://camera'}"
						tooltip="{i18n>EquipmentTableIconTooltipPhotoId}"
						color="Default"
						press="onPhotoDownload"/>	
				</t:template>
			</t:Column>				
			<t:Column 
				id="QuantityCol"
				hAlign="Center" 
				width="5%" 
				filterProperty="Quantity" 
				sortProperty="Quantity">
				<Label text="{i18n>EquipmentTblColHdrQuantity}"/>
				<t:template>
					<Text text="{mEquipment>Quantity}"/>
				</t:template>
			</t:Column>			
			<t:Column 
				id="UserStatusDescCol"
				hAlign="Left"
				width="10%" 
				filterProperty="UserStatusDesc" 
				sortProperty="UserStatusDesc">
				<Label text="{i18n>EquipmentTblColHdrUserStatus}"/>
				<t:template>
					<Text text="{path: 'mEquipment>UserStatusId', formatter: '.formatter.setStatusDescription'}"/>
				</t:template>
			</t:Column>
			<t:Column 
				id="ModificationCol"
				hAlign="Center"
				width="6rem">
				<Label text="{i18n>EquipmentTblColHdrModification}"/>
				<t:template>
					<Bar class="customNoBoxShadow">
						<contentLeft>
							<core:Icon 
								src="{= ${mEquipment>IsCreatedDuringPec} ? 'sap-icon://add-equipment' : none}"
								tooltip="{i18n>EquipmentTableIconTooltipCreatedDuringPEC}"
								color="Positive"/>	
						</contentLeft>
						<contentRight>								
							<core:Icon 
								src="sap-icon://activity-items"
								tooltip="{i18n>EquipmentTableIconTooltipModification}"
								color="Default"
								press="onDisplayModifiedInfoPopoverPress"
								visible="{path: 'mEquipment>ModifiedInfo', formatter: '.formatter.setVisibleModifiedInfoIcon'}"/>
						</contentRight>
					</Bar>								
				</t:template>
			</t:Column>
			<t:Column 
				id="ActionCol"
				hAlign="Center" 
				width="9rem">
				<Label text="{i18n>EquipmentTblColHdrAction}"/>
				<t:template>
					<Bar class="customNoBoxShadow">
						<contentLeft>
							<Button 
								icon="sap-icon://accept"
								press="onApplyEquipmentStatus"
								tooltip="{i18n>EquipmentTableButtonTooltipValidate}"
								type="Accept"
								visible="{= ${mEquipment>UserStatusId} !== 'E0005'}"/>
						</contentLeft>
						<contentMiddle>
							<Button 
								icon="sap-icon://decline"
								press="onApplyEquipmentStatus"
								tooltip="{i18n>EquipmentTableButtonTooltipReject}"
								type="Reject"
								visible="{= ${mEquipment>UserStatusId} !== 'E0006'}"/>
						</contentMiddle>
						<contentRight>
							<Button 
								icon="sap-icon://cause"
								press="onApplyEquipmentStatus"
								tooltip="{i18n>EquipmentTableButtonTooltipReturnTakeover}"
								type="Emphasized"
								visible="{= ${mEquipment>UserStatusId} !== 'E0002'}"/>
						</contentRight>
					</Bar>
				</t:template>
			</t:Column>
		</t:columns>
	</t:Table>
</core:FragmentDefinition>